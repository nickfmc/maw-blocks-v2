{"version":3,"file":"blocks/masonry/frontend.js","mappings":"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","sources":["webpack://maw-blocks/./blocks/masonry/frontend.js"],"sourcesContent":["class MasonryLayout {\n\tconstructor(container) {\n\t\tthis.container = container;\n\t\tthis.grid = container.querySelector('.maw-masonry__grid');\n\t\tthis.items = null;\n\t\tthis.columns = parseInt(container.dataset.columns) || 3;\n\t\tthis.columnsMobile = parseInt(container.dataset.columnsMobile) || 1;\n\t\tthis.columnsTablet = parseInt(container.dataset.columnsTablet) || 2;\n\t\tthis.gap = parseInt(container.dataset.gap) || 20;\n\t\tthis.gapMobile = parseInt(container.dataset.gapMobile) || 15;\n\t\tthis.gapTablet = parseInt(container.dataset.gapTablet) || 18;\n\t\tthis.columnHeights = [];\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.layout();\n\n\t\twindow.addEventListener('resize', () => {\n\t\t\tclearTimeout(this.resizeTimeout);\n\t\t\tthis.resizeTimeout = setTimeout(() => this.layout(), 150);\n\t\t});\n\n\t\tif (window.MutationObserver) {\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\tthis.layout();\n\t\t\t});\n\n\t\t\tobserver.observe(this.grid, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true,\n\t\t\t});\n\t\t}\n\n\t\tconst images = this.grid.querySelectorAll('img');\n\t\tlet loadedImages = 0;\n\t\tconst totalImages = images.length;\n\n\t\tif (totalImages === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\timages.forEach(img => {\n\t\t\tif (img.complete) {\n\t\t\t\tloadedImages++;\n\t\t\t\tif (loadedImages === totalImages) {\n\t\t\t\t\tthis.layout();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\timg.addEventListener('load', () => {\n\t\t\t\t\tloadedImages++;\n\t\t\t\t\tif (loadedImages === totalImages) {\n\t\t\t\t\t\tthis.layout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetCurrentColumns() {\n\t\tconst width = window.innerWidth;\n\n\t\tif (width < 768) {\n\t\t\treturn this.columnsMobile;\n\t\t} else if (width < 1024) {\n\t\t\treturn this.columnsTablet;\n\t\t}\n\n\t\treturn this.columns;\n\t}\n\n\tgetCurrentGap() {\n\t\tconst width = window.innerWidth;\n\n\t\tif (width < 768) {\n\t\t\treturn this.gapMobile;\n\t\t} else if (width < 1024) {\n\t\t\treturn this.gapTablet;\n\t\t}\n\n\t\treturn this.gap;\n\t}\n\n\tlayout() {\n\t\tthis.items = Array.from(this.grid.children);\n\n\t\tif (this.items.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentColumns = this.getCurrentColumns();\n\t\tconst currentGap = this.getCurrentGap();\n\t\tconst containerWidth = this.grid.offsetWidth;\n\t\tconst columnWidth = (containerWidth - (currentGap * (currentColumns - 1))) / currentColumns;\n\n\t\tthis.grid.style.position = 'relative';\n\t\tthis.columnHeights = new Array(currentColumns).fill(0);\n\n\t\tthis.items.forEach((item, index) => {\n\t\t\tconst shortestColumn = this.columnHeights.indexOf(Math.min(...this.columnHeights));\n\t\t\tconst xPos = shortestColumn * (columnWidth + currentGap);\n\t\t\tconst yPos = this.columnHeights[shortestColumn];\n\n\t\t\titem.style.position = 'absolute';\n\t\t\titem.style.width = `${columnWidth}px`;\n\t\t\titem.style.left = `${xPos}px`;\n\t\t\titem.style.top = `${yPos}px`;\n\t\t\titem.style.transition = 'all 0.3s ease';\n\n\t\t\tconst itemHeight = item.offsetHeight;\n\t\t\tthis.columnHeights[shortestColumn] += itemHeight + currentGap;\n\t\t});\n\n\t\tconst maxHeight = Math.max(...this.columnHeights);\n\t\tthis.grid.style.height = `${maxHeight}px`;\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst masonryContainers = document.querySelectorAll('.maw-masonry');\n\n\tmasonryContainers.forEach(container => {\n\t\tnew MasonryLayout(container);\n\t});\n});\n"],"names":["MasonryLayout","constructor","container","grid","querySelector","items","columns","parseInt","dataset","columnsMobile","columnsTablet","gap","gapMobile","gapTablet","columnHeights","resizeTimeout","init","layout","window","addEventListener","clearTimeout","setTimeout","MutationObserver","observer","observe","childList","subtree","images","querySelectorAll","loadedImages","totalImages","length","forEach","img","complete","getCurrentColumns","width","innerWidth","getCurrentGap","Array","from","children","currentColumns","currentGap","containerWidth","offsetWidth","columnWidth","style","position","fill","item","index","shortestColumn","indexOf","Math","min","xPos","yPos","left","top","transition","itemHeight","offsetHeight","maxHeight","max","height","document","masonryContainers"],"sourceRoot":""}