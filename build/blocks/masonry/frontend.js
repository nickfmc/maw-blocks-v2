(()=>{class t{constructor(t){this.container=t,this.grid=t.querySelector(".maw-masonry__grid"),this.items=null,this.columns=parseInt(t.dataset.columns)||3,this.columnsMobile=parseInt(t.dataset.columnsMobile)||1,this.columnsTablet=parseInt(t.dataset.columnsTablet)||2,this.gap=parseInt(t.dataset.gap)||20,this.gapMobile=parseInt(t.dataset.gapMobile)||15,this.gapTablet=parseInt(t.dataset.gapTablet)||18,this.columnHeights=[],this.resizeTimeout=null,this.init()}init(){this.layout(),window.addEventListener("resize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.layout(),150)}),window.MutationObserver&&new MutationObserver(()=>{this.layout()}).observe(this.grid,{childList:!0,subtree:!0});const t=this.grid.querySelectorAll("img");let e=0;const s=t.length;0!==s&&t.forEach(t=>{t.complete?(e++,e===s&&this.layout()):t.addEventListener("load",()=>{e++,e===s&&this.layout()})})}getCurrentColumns(){const t=window.innerWidth;return t<768?this.columnsMobile:t<1024?this.columnsTablet:this.columns}getCurrentGap(){const t=window.innerWidth;return t<768?this.gapMobile:t<1024?this.gapTablet:this.gap}layout(){if(this.items=Array.from(this.grid.children),0===this.items.length)return;const t=this.getCurrentColumns(),e=this.getCurrentGap(),s=(this.grid.offsetWidth-e*(t-1))/t;this.grid.style.position="relative",this.columnHeights=new Array(t).fill(0),this.items.forEach((t,i)=>{const n=this.columnHeights.indexOf(Math.min(...this.columnHeights)),o=n*(s+e),l=this.columnHeights[n];t.style.position="absolute",t.style.width=`${s}px`,t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.transition="all 0.3s ease";const a=t.offsetHeight;this.columnHeights[n]+=a+e});const i=Math.max(...this.columnHeights);this.grid.style.height=`${i}px`}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".maw-masonry").forEach(e=>{new t(e)})})})();